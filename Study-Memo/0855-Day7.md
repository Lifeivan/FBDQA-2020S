# 第七周课堂笔记

**何晨宇 2017010855**

## PLPython

**在SQL里使用Python语言**

语法定义函数：CREATE FUNCTION

CREATE FUNCTION *funcname* （*argument-list*）

RETURN *return-type*

AS $$

函数主体

$$ LANGUAGE plpython3u;

数据共享：

- 函数之间可用全局字典SD、GD来共享数据
- SD是私有静态数据
- GD是公共数据，对一个会话中的所有python函数公用。

数据库访问：

- import了plpy模块，可以直接调用
- 有若干访问数据库的命令

异常捕捉：

- 访问数据库的函数出错导致函数抛出异常并终止，若不想终止需要捕捉异常并处理(try/encept结构)
- plpy抛出的异常属于plpy SPIError异常类的子类
- 还可以捕捉其它异常

显式子事务：

- 异常处理时，操作失败前有些操作已经成功，导致异常中恢复（回滚）后操作的数据不一致

## Advanced SQL

**输出控制和重定向**

将查询结果存储到另一个表中或插入另一个表

**窗口函数**

聚合函数，特殊窗口函数

**通用表表达式**

## 期权

**期权投资的魅力**

- 不用看天吃饭
- 多维度的获利途径
- 策略的多样性
- 风险收益不对称
- 以小博大，捕捉黑天鹅

**什么是期权**

期权是一种在股票（指数/个股）或期货品种基础上的金融衍生品

投资者约定在未来买入或卖出某项标的资产的权利

认购期权，约定在未来的某个时间点买方从卖房以约定价格买入股票/ETF的权利；认沽期权

**风险收益不对称**

**国内已上市的期权品种**

股票期权：上证50ETF期权，沪深200ETF期权

商品期货期权：豆粕，白糖，沪铜 ...

股指期权：沪深300股指期权

**交易角色**

- 期权买方：支付权利金、享有权利。
- 期权卖方：获得权利金，只有义务（缴纳保证金）。

**交易动作**

- 开仓操作：买入期权合约，新建立头寸
- 了结头寸（出场）：到期行权（美式，任何时候都可以要求行使权力/欧式，，只有到最后一天才能行权），提前平仓，放弃行权

**场内期权产品的特点**

- 功能强大：方向型交易，A股风险对冲，多腿组合策略，跨品种组合策略
- 策略多样：看大涨/大跌，小涨/小跌 ...
- 交易灵活：高杠杆率，大涨跌幅限制，T+0机制 ...

**合约要素**

期权类型、权利金、行权价格、到期日

**期权价格（权利金）=内在价值+时间价值**

#### **期权的四大基本策略**

**基本策略1：买入看涨期权**

买方，看大涨

**基本策略2：买入看跌期权**

买方，看大跌

**基本策略3：卖出看涨期权**

卖方，看不涨

**基本策略4：卖出看跌期权**

卖方，看不跌

#### **期权价格的影响因素**

- 期权价格变化 $\approx$ 价格风险+波动率风险+时间流逝风险
- 隐含波动率
  - 权利金蕴含的波动率，它是将某一个期权合约的成交价及其他几个参数输入期权定价模型计算得出的数值
  - 反映了市场对波动率的看法。当隐含波动率上升，代表投资者预期标的的价格波动将扩大，因此权利金也会上涨；反之权利金则会下跌
  - 隐含波动率的变化带来了投资机会
- 历史波动率、预测波动率、实现波动率

买方要“懒”，卖方要“勤”

#### 期权价格指标分解（Greeks）

- Delta：衡量标的资产价格变动时，期权价格的变化幅度
- Gamma：衡量标的资产价格变动时，期权Delta值的变化幅度
- Vega：衡量标的资产价格波动率变动时，期权价格的变化幅度
- Theta：衡量随着时间的流逝，期权价格的变化幅度
- Rho：衡量无风险利率变动时，期权价格的变化幅度

**价差组合原理**

#### 完整的期权交易策略

对于标的资产价格未来走势，搭配交易策略

可以同时看多又看空

即便是盘整也可以赚取权利金

**风险对冲**

最大亏损有限

安心持股不纠结

股价上涨仍可获得上行收益

