## 课程小结-Day 7

材72 李学晨



### 内容1：PostagreSQL

(1)create function

(2)匿名代码块(无输入，无返回)

(3)数据类型映射/转换关系

(4)数据共享：全局字典SD(私有静态数据)，GD(公共数据，对一个会话中所有python函数是公用的)

(5)数据库访问：plpy模块：运行query并将结果返回；创建一个查询对象(query模板)；查询结果多时应使用cursor代替execute，返回cursor对象，通过迭代获得结果；

(6)异常捕捉

(7)显式子事务



### 内容2：Advanced SQL

(1)输出重定向，将查询结果存储到另一个表中；该表不能被事先定义；该表含有和输入同样数量和类型的列

(2)输出控制：limit<count>[offset]，限制输出中tuple的数目，可以设置偏移量来指定开始检索的位置

(3)窗口函数：在一组相关的tuples上执行滑动计算，类似聚合函数，但是tuples不会被组成一个单独的输出tuples；over可以指定按某个特征分组，其中也可使用order by进行排序

(4)通用表表达式：用于在更大的query中写辅助表达式，可以认为是只在该query中存在的临时表；with as



### 内容3：期权

(1)已上市品种：

1. 股票期权：上证50ETF，沪深300ETF
2. 商品期货期权
3. 股指期权

(2)合约要素：合约标的

(3)期权价格=内在价值+时间价值

(4)买方要懒(防止时间价值损失)，卖方要勤

(5)价差组合原理
