# week 5 

### part 1 大数据部分

**为什么**要有DB【data base】

​	金融数据对数据系统极为依赖；大量数据需要处理；

SQL是对数据库的修改修饰的语言；

**定制化数据系统**：三个系统的组合，目前很多金融系统的思路；  

**关系数据模型**：用外键和组键进行组合；

​	关系模型的实质就是表；



### PART 2 SQL(2)

1、**连接**：不定义外键时可以通过连接将表进行查询；

​		on后面跟相等的值；

​		p.name可以表示Person.name；

​	**内部连接**：

​		join on; inner join; inner一般可以省略；

​		内连接取值不会有空值；

​	**外部连接**：

​		左外连接：以左侧为准；即使左侧无匹配值，也要进行输出；

​		Full outer join: 	

2、**集合**：若有一个集合是空集的话，Python会直接退出；

​	筛选时注意条件的重复；

3、**嵌套查询**：

​		all & exist  & any

​		<> means != 

4、**计算**：distinct 避免重复；

5、分组和嵌套查询的区别：嵌套查询



### PART 3 交易

股票池择时：股票池+买入卖出信号=策略基础

剔除的方法：尽可能剔除差的；

PA to API；

**MA3上穿MA200**: 金叉；设计大幅差距的目的：

​		短均线：寻求在趋势跟踪中的及时性；但稳定性会差；趋势反复；

​		大均线较为稳定；

**20分钟K线**也是为了达到及时性；

#### **交易开拓者TB**：

​		图表式开发工具，如果要形成一个策略，需要交易标的的K线；

**工作原理**：若持有空仓，平掉再开多仓；空仓同理；

​		回测模式；实盘；

__海龟交易法则在TB的应用__：

投资组合性能测试报告

**风险**：ATR和标准差；

​	标准差年化12开根号

**夏普比率**：风险和收益的平衡；减去无风险收益；

**最大回撤**：最坏的情况；

其他指标；未来函数：未来可能用到的数据；

策略诊断对交易记录至关重要；  

**后验Alpha分解**：

​		收益=大盘波动（Beta）+择时能力（Alpha）

​		查主动管理的书；

夏普比例衡量总体的收益和风险的比值；

信息率衡量Alpha部分的收益和风险的比值；

后验分解的作业：有示例代码；

找收益序列；相对于不同的基准进行分解；进一步讨论对比；

用一支股票分析收益序列；