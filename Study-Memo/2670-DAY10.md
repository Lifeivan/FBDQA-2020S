# 经典技术指标与原理

### 指标分类

- 均线型 ：MA EXPMA BBI 加权方式不同

- 趋势型：MACD SAR ASI DMI

- 摆动型：检测超买超卖等震荡类行情 KDJ,RSI,CCI,WR BOLL

- 能量型 ：涨跌的力度  OBV,VOL,VR

- KD-随机指数  %K= 100 x (Close - min Low)/(max High - min Low)  快速指标

  high low 指的是K线

  %D = MA(%K,N)   慢速指标

  当K,D出现金叉 oversold 买入信号

  死叉 overbought 卖出信号

  - 为什么价格连涨 指标在高位会钝化？ 因为在高位已经没有什么很高的涨空间了

- RSI 相对强弱指数

  - RSI = 100* (sum(MAX(Close - LC, 0)))/(sum(|Close - LC|)) 阳线多就高 阴线多就低
  - 过低-> oversold  过高-> overbought

### 指数指标应用技巧

- 信号

  突破 背离

  - 价格突破/指标突破

    价格突破很难预测 指标突破例如突破均线

    ’死亡之吻‘ 就是下跌了之后又回弹至均线后面泄洪式下跌

  - 顶背离/底背离 稍微可靠一点

    价格和指标产生了背离 例如价格上升，但指标没有创新高或反而下降 bearish divergence 顶背离

    价格跌 指标涨  bullish divergence

  - 背离检测

    判断价格是否创新高/低  指标是否~

- 基本面指标

- 资金流向指标

  - 各个软件算法不一样 结果可能不同



### 编写量化指标

- 金叉死叉背离

  - 只关注0以下的金叉 0以上的死

    有时信号闪烁严重->需要过滤 这个需要自身总结->频次、逻辑等等

  - 编写逻辑

    寻找识别极值点 可能不是同一时间的

    解决纠缠的问题 背离点对应的macd值不能太小

  - 关注：

    信号闪烁、边界与异常、噪声过滤、可变因素的处理



### 评价指标

- 收益分布 

  - 直方图 

    看持仓多长时间有效

  - 除了胜率赔率

    交易成本、持仓周期、资金利用率、年化收益

    交易机会、交易频次

    资金管理、风险控制



### 组合形态

价格形态

- 反转形态

  - 圆弧顶、圆弧底

    比如圆弧底 在底端的时候少人买、少人卖 所以长期在底部

    但个股可能会被控盘的，所以也不一样有效

- 持续形态

  - 矩形、三角形、楔形、旗形



自动识别

- 数学化表示
  - 统计学习 要大量样本 但一劳永逸
  - 用关键转折点匹配  比较快 但维护起来慢



震荡突破

- 描述震荡

- 定义趋势效率

  Eff = (H-L)/(sum(Hi-Li))  越高代表震荡越大



RSRS resistance support relative strength  2017 光大证券

- 上涨遇阻力  下跌无支撑 -> 下跌

- 上涨破阻力，下跌有支撑 -> 上涨

- 一元线性回归与OLS 

  H = BETA * L + alpha + theta



### 金融统计学

- 正态性检验  （对数收益率）

  - 均值-方差投资组合理论的基础假设

    - 图形化-> 频率分别直方图 QQplot
    - 定量

   Black-Scholes-Merton 几何布朗运动模拟股票指数变化

   离散化 随机生成若干条股票指数变化的样本路径

   σ ：S的恒定波动率 （收益标准差）

  - 股票对数收益率
  
    log (S t+delta t / S t)
  
  - QQ PLOT  
  
    python 里面 statsmodels.api 
  
  - 定量方式
  
    偏度与峰度  正态的偏度与峰度均为0
  
    假设检验  
  
  
  
  ### 投资组合优化

  - MPT   modern portfolio theory
  
    - normality assumption
  
  - 预期收益率以及方差的计算
  
  - 有效边界的获取
  
  - 加入无风险投资后的投资组合配置
  
    - 每日对数收益率*252 -> 年化对数收益率
  
    - 对数收益率的协方差矩阵（同样年化处理 *252）
  
      - 物理意义 对角线：对应的方差 非对角线：两个资产波动的相关性
  
    - 假设不可以建立空头头寸 一开始随机生成5种资产的投资权重 -> 投资组合的预期收益（均值）
  
      - miu_p = wT miu
  
    - 方差、标准差
  
      - σ_p^2 = wT ∑ w  σp= sqrt( wT ∑ w )
  
    - 有效边界
  
      给定风险水平下，最大化收益的投资组合构成的集合
  
      - 蒙特卡洛模拟 随机生成较大规模的投资组合权重w
      - 模拟 
  
    - scipy,optimize  的 minimize函数
  
      - 最大化夏普比率
        - 取负号后取min
        - 约束 权重之和为1
        - 初始值
        - 上下界约束
        - 求解方式 method='SLSQP' 也可以不用用默认的
      - 最小化方差组合
        - 同上
      - 求解给定收益率下最小化风险的组合 -> 最优投资组合
        - 收益率给定
        - 权重之和1
        - 上下界（0，1）
  
    - 无风险的加入
  
      - rf 点 + max.sharpe 点连线中选择
      - 根据risk averse程度判断
      - 用一阶可导函数逼近有效边界 or 求切点出斜率最大 用min去做
  
    

